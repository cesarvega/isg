<div *ngIf="visibleApp" class="row" ng-app="visibleApp">
    <div class="col-md-12">
        <h3>
            <i class="fa fa-bars"></i>
            Products Selection
        </h3>
        <hr>
        <div class="alert alert-danger" ng-show="errorMsg.show">
            <strong>
                <i class="fa fa-exclamation-circle"></i>
                An error occurred:
            </strong>
            <hr>
            {{ errorMsg.message }}
        </div>
        <div class="row">
            <div class="col-md-3" ng-repeat="product in offers | orderBy : '-downSpeed'">
                <div class="panel" ng-class="selectedProduct.id == product.id?'panel-success':'panel-warning'">
                    <div class="panel-heading">
                        <div class="panel-title" style="text-align: center; min-height: 44px;">
                            <strong>{{ product.name }}</strong>
                        </div>
                    </div>
                    <div class="panel-body" style="text-align: center;" >
                        <div class="price" style="min-height: 86px;">
                            <span>$</span>
                            <span class="integer-part">{{ product.priceMonthly  }}</span>
                            <span>.{{ product.priceMonthly  }}/mo</span>
                            <br>
                            <i class="fa fa-plus" style="color: black;"></i>
                            <br>
                            <span>{{ product.equipmentPrice  }}/equipment monthly</span>
                        </div>
                        <div class="installation">
                            <div class="row">
                                <div class="col-md-12">
                                    <strong>Contract Term</strong>
                                    <br>
                                    <span style="color: orangered;">
                                        {{ product.contract }} Month(s)
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="installation">
                            <div class="row">
                                <div class="col-md-6">
                                    <strong>Early Termination Fee</strong>
                                    <br>
                                    <span style="color: orangered;">
                                        {{ product.etfFee  }}
                                    </span>
                                </div>
                                <div class="col-md-6">
                                    <strong>Installation service fee</strong>
                                    <br>
                                    <span style="color: orangered;">{{ product.installationPrice  }}</span>
                                </div>
                            </div>
                            <br>
                            <div class="row">
                                <div class="col-md-12">
                                    <strong>Activation Fee</strong>
                                    <br>
                                    <span style="color: orangered;">
                                        {{ product.activationFee }}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="speed">
                            <span class="title">Speeds up to</span>
                            <div class="clearfix"></div>
                            <div class="col-md-6">
                                <span>Download</span>
                                <span class="speed-unit">{{ product.downSpeed }}</span>
                                <span>{{ product.downSpeed  }}</span>
                            </div>
                            <div class="col-md-6">
                                <span>Upload</span>
                                <span class="speed-unit">{{ product.upSpeed  }}</span>
                                <span>{{ product.upSpeed  }}</span>
                            </div>
                            <div class="clearfix"></div>
                            <br>
                        </div>
                        <div class="product-description">
                            {{ product.description }}
                        </div>
                        <br><br>
                        [ <a href="#" ng-click="seeAllDetails(product, $event)">Term and Conditions</a> ]
                        <br>
                        <span style="font-style: italic; font-size: 0.9em; color: gray;">Product Id: {{ product.id }}</span>
                    </div>
                    <div class="panel-footer">
                        <button class="btn btn-block btn-success"
                                ng-click="selectProduct(product)" ng-disabled="runningSelectingProduct"
                                ng-if="!selectedProduct || selectedProduct.id !== product.id" >
                            Select
                        </button>
                        <button class="btn btn-block btn-warning" disabled="disabled"
                                ng-if="selectedProduct.id == product.id">
                            Selected
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-12">
                <button class="btn btn-primary pull-right"
                        ng-disabled="runningSelectingProduct || !selectedProduct"
                        ng-click="submitSelections()">
                    Submit
                    <i class="fa fa-arrow-right" ng-hide="runningSelectingProduct"></i>
                    <i class="fa fa-spin fa-spinner" ng-show="runningSelectingProduct"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="modal fade" id="productDetails" tabindex="-1" role="dialog" aria-labelledby="productDetails">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                        Product Details [ {{ preSelectedProduct.name }} ]
                    </h4>
                </div>
                <div class="modal-body">
                    <h4 style="text-decoration: underline;">Product Description</h4>
                    <div class="well" ng-bind-html="preSelectedProduct.description"></div>
                    <h4 style="text-decoration: underline;">Equipment Description</h4>
                    <div class="well" ng-bind-html="preSelectedProduct.equipmentDescription"></div>
                    <h4 style="text-decoration: underline;">Terms and conditions</h4>
                    <div class="well" ng-bind-html="preSelectedProduct.terms"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div *ngIf="!visibleApp">
    Loading... spinner
</div>